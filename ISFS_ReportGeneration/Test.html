PCFET0NUWVBFIEhUTUw+DQoNCg0KPGh0bWw+DQo8aGVhZD4NCjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz52YXIgTG9hZFN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOzwvc2NyaXB0Pg0KPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPkFQUExJQ0FUSU9OX0ZVTExfVkVSU0lPTiA9ICc5LjEuMC4yMTAzNCc7PC9zY3JpcHQ+DQo8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+DQoJCQl2YXIgaXNLZXlQcmVzc2VkPWZhbHNlOw0KCQkJdmFyIGhlYWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsNCgkJCXZhciBzdHlsZV9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsNCgkJCXN0eWxlX2VsZW1lbnQuaWQgPSAnZm9jdXNTdHlsZSc7DQoJCQl2YXIgZm9jdXNDc3MgPSAnOmZvY3Vze291dGxpbmU6MnB4IGRhc2hlZCAhaW1wb3J0YW50OyBvdXRsaW5lLW9mZnNldDogMXB4ICFpbXBvcnRhbnQ7fTo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6MDt9JzsNCgkJCXZhciByZW1vdmVmb2N1c0NzcyA9ICc6Zm9jdXN7b3V0bGluZTowfTo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6MDt9JzsNCg0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsNCgkJCQlpc0tleVByZXNzZWQ9dHJ1ZTsNCg0KCQkJCS8vIFRoaXMgY2xhc3MgYnJlYWtzIGRyYWcvZHJvcCBrZXlib2FyZCBhY2Nlc3NpYmlsaXR5IGluIHRoZSBkYXNoYm9hcmQgZWRpdG9yLCBzbyB0ZW1wb3JhcmlseSByZW1vdmUgaXQuDQoJCQkJaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2Rhc2hib2FyZEVkaXRvci5hc3B4JykgPiAtMSkNCgkJCQl7DQoJCQkJCXZhciB0YXJnZXQgPSBlICYmIGUudGFyZ2V0Ow0KCQkJCQlpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygna2V5Ym9hcmRGb2N1c0NsYXNzJykpIHsNCgkJCQkJCXRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZEZvY3VzQ2xhc3MnKTsNCgkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRhcmdldC5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZEZvY3VzQ2xhc3MnKTsgfSwgMCk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9KTsNCg0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZ1bmN0aW9uKGUpIHsNCgkJCQlpZiAoaXNLZXlQcmVzc2VkKSB7DQoJCQkJCWlmIChkb2N1bWVudC5ib2R5ICE9ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmJvZHkgIT0gbnVsbCkgew0KCQkJCQkJZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZEZvY3VzQ2xhc3MnKTsNCgkJCQkJfQ0KCQkJCQkNCgkJCQkJaWYoZS50YXJnZXQuY2xhc3NMaXN0KXsNCgkJCQkJCWUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkRm9jdXNDbGFzcycpOw0KCQkJCQl9DQoNCgkJCQkJaWYgKGUudGFyZ2V0LnBhcmVudEVsZW1lbnRiICE9IG51bGwgJiYgZS50YXJnZXQucGFyZW50RWxlbWVudCAhPSAndW5kZWZpbmVkJyAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdCkgew0KCQkJCQkJZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZEZvY3VzQ2xhc3MnKTsNCgkJCQkJfQ0KDQoJCQkJCXN0eWxlX2VsZW1lbnQuaW5uZXJIVE1MID0gZm9jdXNDc3M7DQoJCQkJCWhlYWRFbGVtZW50LmFwcGVuZENoaWxkKHN0eWxlX2VsZW1lbnQpOw0KCQkJCQlpc0tleVByZXNzZWQ9ZmFsc2U7DQoJCQkJfQ0KCQkJIH0pOw0KDQoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHsNCgkJCQl2YXIgZXhpc3RpbmdTdHlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3R5bGUnKTsNCgkJCQl2YXIgaSA9IDA7DQoJCQkJd2hpbGUgKGkgPCBleGlzdGluZ1N0eWxlcy5sZW5ndGgpIHsNCgkJCQkJaWYgKGV4aXN0aW5nU3R5bGVzW2ldLmlkID09ICdmb2N1c1N0eWxlJykgew0KCQkJCQkJaGVhZEVsZW1lbnQucmVtb3ZlQ2hpbGQoZXhpc3RpbmdTdHlsZXNbaV0pOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJaSsrOw0KCQkJCQl9DQoJCQkJfQ0KDQoJCQkJaWYgKGRvY3VtZW50LmJvZHkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuYm9keSAhPSBudWxsKSB7DQoJCQkJCWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmRGb2N1c0NsYXNzJyk7DQoJCQkJfQ0KCQkJCWlmKGUudGFyZ2V0LmNsYXNzTGlzdCl7DQoJCQkJCWUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkRm9jdXNDbGFzcycpOw0KCQkJCX0NCgkJCQkNCgkJCQlpZiAoZS50YXJnZXQucGFyZW50RWxlbWVudCAhPSBudWxsICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QpIHsNCgkJCQkJZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZEZvY3VzQ2xhc3MnKTsNCgkJCQl9DQoJCQkgfSk7DQoNCgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHsNCgkJCQlpc0tleVByZXNzZWQ9ZmFsc2U7DQoJCQkJaWYgKGRvY3VtZW50LmJvZHkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuYm9keSAhPSBudWxsKSB7DQoJCQkJCWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmRGb2N1c0NsYXNzJyk7DQoJCQkJfQ0KCQkJCWlmKGUudGFyZ2V0LmNsYXNzTGlzdCl7DQoJCQkJCWUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkRm9jdXNDbGFzcycpOw0KCQkJCX0NCg0KCQkJCWlmIChlLnRhcmdldC5wYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgZS50YXJnZXQucGFyZW50RWxlbWVudCAhPSAndW5kZWZpbmVkJyAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdCkgew0KCQkJCQllLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkRm9jdXNDbGFzcycpOw0KCQkJCX0NCg0KCQkJCXZhciBleGlzdGluZ1N0eWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdHlsZScpOw0KCQkJCXZhciBpID0gMDsNCgkJCQl3aGlsZSAoaSA8IGV4aXN0aW5nU3R5bGVzLmxlbmd0aCkgew0KCQkJCQlpZiAoZXhpc3RpbmdTdHlsZXNbaV0uaWQgPT0gJ2ZvY3VzU3R5bGUnKSB7DQoJCQkJCQloZWFkRWxlbWVudC5yZW1vdmVDaGlsZChleGlzdGluZ1N0eWxlc1tpXSk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlpKys7DQoJCQkJCX0NCgkJCQl9DQoNCgkJCQlzdHlsZV9lbGVtZW50LmlubmVySFRNTCA9IHJlbW92ZWZvY3VzQ3NzOw0KCQkJCWlmICghKE1zY3JtLlV0aWxpdGllcy5pc0lFKCkgJiYgZS50YXJnZXQudGFnTmFtZT09PSdTRUxFQ1QnKSkgew0KCQkJCQloZWFkRWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZV9lbGVtZW50KQ0KCQkJCX0NCgkJCX0pOw0KCQkJCQ0KCQkJPC9zY3JpcHQ+DQo8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+dmFyIENETlVSTCA9ICcnOzwvc2NyaXB0Pg0KPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPg0KCQkJCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgew0KCQkJCQkJICBpZiAoIXdpbmRvdy5Qb3N0UmVuZGVyVGltZSkgDQoJCQkJCQkJew0KCQkJCQkJCQl3aW5kb3cuUG9zdFJlbmRlclRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOw0KCQkJCQkJCX0NCgkJCQkJCX0pOw0KCQkJCQkJPC9zY3JpcHQ+DQo8dGl0bGU+TWljcm9zb2Z0IER5bmFtaWNzIDM2NSA6IFVuZXhwZWN0ZWQgRXJyb3I8L3RpdGxlPg0KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL19jb21tb24vc3R5bGVzL2ZvbnRzLmNzcy5hc3B4P3Zlcj0xNDA4Mzc1MjgmYW1wO2xjaWQ9MTAzMyIgaWQ9Ii9fY29tbW9uL3N0eWxlcy9mb250cy5jc3MuYXNweD92ZXI9MTQwODM3NTI4JmFtcDtsY2lkPTEwMzMiIC8+DQo8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvX2NvbW1vbi9zdHlsZXMvZ2xvYmFsLmNzcy5hc3B4P3Zlcj0xNDA4Mzc1MjgmYW1wO2xjaWQ9MTAzMyIgaWQ9Ii9fY29tbW9uL3N0eWxlcy9nbG9iYWwuY3NzLmFzcHg/dmVyPTE0MDgzNzUyOCZhbXA7bGNpZD0xMDMzIiAvPg0KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL19jb21tb24vc3R5bGVzL3RoZW1lLmNzcy5hc3B4P2xjaWQ9MTAzMyZhbXA7dmVyPTE0MDgzNzUyOCZhbXA7dGhlbWU9T3V0bG9vazE0U2lsdmVyIiBpZD0iL19jb21tb24vc3R5bGVzL3RoZW1lLmNzcy5hc3B4P2xjaWQ9MTAzMyZhbXA7dmVyPTE0MDgzNzUyOCZhbXA7dGhlbWU9b3V0bG9vazE0c2lsdmVyIiAvPg0KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL19zdGF0aWMvX2NvbW1vbi9zdHlsZXMvc2Vzc2lvbm1hbmFnZW1lbnQuY3NzP3Zlcj0xNDA4Mzc1MjgiIGlkPSIvX3N0YXRpYy9fY29tbW9uL3N0eWxlcy9zZXNzaW9ubWFuYWdlbWVudC5jc3M/dmVyPTE0MDgzNzUyOCIgLz4NCjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii9fZm9ybXMvY29udHJvbHMvY29udHJvbHMuY3NzLmFzcHg/dmVyPTE0MDgzNzUyOCZhbXA7bGNpZD0xMDMzIiBpZD0iL19mb3Jtcy9jb250cm9scy9jb250cm9scy5jc3MuYXNweD92ZXI9MTQwODM3NTI4JmFtcDtsY2lkPTEwMzMiIC8+DQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQp2YXIgTE9DSURfSVBBRFdJTkNMT1NFRCA9ICdBbiBlcnJvciBoYXMgb2NjdXJyZWQuIFBsZWFzZSByZXR1cm4gdG8gdGhlIGhvbWUgcGFnZSBhbmQgdHJ5IGFnYWluLic7DQp2YXIgTE9DSURfUFVCTElTSF9NRVNTQUdFX1NJTkdMRSA9ICdQdWJsaXNoaW5nIG1vYmlsZSBvZmZsaW5lIHByb2ZpbGUgYW5kIHByb2ZpbGUgaXRlbXNcdTIwMjYnOw0KdmFyIExPQ0lEX1BVQkxJU0hfTUVTU0FHRV9NVUxUSVBMRSA9ICdQdWJsaXNoaW5nIHNlbGVjdGVkIG1vYmlsZSBvZmZsaW5lIHByb2ZpbGVzIGFuZCBwcm9maWxlIGl0ZW1zXHUyMDI2JzsNCnZhciBMT0NJRF9NRVNTQUdFX1VTRVJfTVVMVElfUFJPRklMRSA9ICdUaGlzIHVzZXIgYWxyZWFkeSBleGlzdHMgaW4gYW5vdGhlciBtb2JpbGUgb2ZmbGluZSBwcm9maWxlLiBJZiB5b3UgYWRkIHRoZSB1c2VyIHRvIHRoaXMgcHJvZmlsZSwgdGhlIHVzZXIgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIG90aGVyIHByb2ZpbGUuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZVx4M2YnOw0KdmFyIExPQ0lEX1RJVExFX1VTRVJfTVVMVElfUFJPRklMRSA9ICdVc2VyIGFscmVhZHkgZXhpc3RzIGluIGFub3RoZXIgcHJvZmlsZSc7DQp2YXIgTE9DSURfQ0xPTkVfTUVTU0FHRSA9ICdDcmVhdGUgYSBuZXcgbW9iaWxlIG9mZmxpbmUgcHJvZmlsZSBmcm9tIHRoaXMgbW9iaWxlIG9mZmxpbmUgcHJvZmlsZS4nOw0KdmFyIExPQ0lEX0NMT05FX1RJVExFID0gJ0Nsb25lIG1vYmlsZSBvZmZsaW5lIHByb2ZpbGUnOw0KdmFyIExPQ0lEX0FOQUxZWkVfTUVTU0FHRSA9ICdQcmVwYXJpbmcgcHJvZmlsZSByZXBvcnQgZm9yIGRvd25sb2FkIGFuZCBhbmFseXNpcy4uLic7DQp2YXIgTE9DSURfQlJBTkROQU1FID0gJ01pY3Jvc29mdCBEeW5hbWljcyAzNjUnOw0KdmFyIExPQ0lEX1VJX0RJUiA9ICdMVFInOw0KdmFyIExPQ0lEX0FDVElPTl9VTlNVUFBPUlRFRF9FUlJPUiA9ICdUaGlzIGFjdGlvbiBpcyBub3Qgc3VwcG9ydGVkLic7DQp2YXIgTE9DSURfVU5TVVBQT1JURURfUklCQk9OQUNUSU9OID0gJ1RoaXMgYWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhlIGJyb3dzZXIgdGhhdCB5b3UgYXJlIHVzaW5nLic7DQp2YXIgTE9DSURfTE9PS1VQX0xBQkVMX0ZPUl9FRElUID0gJ1x4N2IwXHg3ZCBceDdiMVx4N2QnOw0KdmFyIExPQ0lEX0VNQUlMX1BSRUZJWF9SRVBMWSA9ICdSRVx4M2EnOw0KdmFyIExPQ0lEX0VNQUlMX1BSRUZJWF9GT1JXQVJEID0gJ0ZXXHgzYSc7DQp2YXIgTE9DSURfRU1BSUxfRk9MTE9XVVBfVE8gPSAnVG9ceDNhJzsNCnZhciBMT0NJRF9FTUFJTF9GT0xMT1dVUF9TVUJKRUNUID0gJ1N1YmplY3RceDNhJzsNCnZhciBMT0NJRF9FTUFJTF9GT0xMT1dVUF9TRU5ERVIgPSAnRnJvbVx4M2EnOw0KdmFyIExPQ0lEX0VNQUlMX0ZPTExPV1VQX1JFQ0VJVkVEID0gJ1JlY2VpdmVkXHgzYSc7DQp2YXIgTE9DSURfRU1BSUxfRk9MTE9XVVBfQ0MgPSAnQ2NceDNhJzsNCnZhciBMT0NJRF9NU0NSTV9NU0dCT0RZX0ZPTlRTID0gJ1RhaG9tYSwgVmVyZGFuYSwgQXJpYWwnOw0KdmFyIExPQ0lEX0RMR19PS19CVE5fTEFCRUwgPSAnT0snOw0KdmFyIExPQ0lEX0RMR19DQU5DRUxfQlROX0xBQkVMID0gJ0NhbmNlbCc7DQp2YXIgTE9DSURfTkFWX1JJR0hUTElOS19UT09MVElQID0gJ0dvIHRvIG5leHQgcGFnZSc7DQp2YXIgTE9DSURfTkFWX0xFRlRMSU5LX1RPT0xUSVAgPSAnR28gdG8gcHJldmlvdXMgcGFnZSc7DQp2YXIgTE9DSURfRExHX1JFVFVSTlRPQ1JNX1RJVExFID0gJ0FueSBjaGFuZ2VzIGluIEV4Y2VsIHdpbGwgYmUgbG9zdCc7DQp2YXIgTE9DSURfRExHX1JFVFVSTlRPQ1JNX1RFWFQgPSAnVGhlIGNoYW5nZXMgeW91IG1ha2UgaW4gRXhjZWwgd2lsbCBiZSBsb3N0IHVubGVzcyB5b3Ugc3VibWl0IHRoZSBjaGFuZ2VzIHRvIER5bmFtaWNzIDM2NS4nOw0KdmFyIExPQ0lEX1JFU09MVkVfV0FSTklOR19URVhUID0gJ1NvbWUgY2hhbmdlcyBkaWRuXHgyN3QgYXBwbHkgc3VjY2Vzc2Z1bGx5IGJlY2F1c2Ugb2YgZm9ybSBhbmQgYXR0cmlidXRlIHNldHRpbmdzLCBidXQgeW91IGNhbiBzdGlsbCBzYXZlIHlvdXIgY2hhbmdlcyBhbmQgcmVzb2x2ZSB0aGUgc3luYyBlcnJvci4nOw0KdmFyIExPQ0lEX1JFU09MVkVfSU5GT19URVhUID0gJ1lvdXIgY2hhbmdlcyBhcmUgYXBwbGllZCBzdWNjZXNzZnVsbHkgYW5kIHlvdSBjYW4gc2F2ZSBhbmQgcmVzb2x2ZSB0aGUgc3luYyBlcnJvci4nOw0KdmFyIExPQ0lEX1JFTU9URUNPTU1BTkRfRVJST1IgPSAnQW4gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnkgdGhpcyBhY3Rpb24gYWdhaW4uIElmIHRoZSBwcm9ibGVtIGNvbnRpbnVlcywgY2hlY2sgdGhlIE1pY3Jvc29mdCBEeW5hbWljcyAzNjUgQ29tbXVuaXR5IGZvciBzb2x1dGlvbnMgb3IgY29udGFjdCB5b3VyIG9yZ2FuaXphdGlvblx4MjdzIE1pY3Jvc29mdCBEeW5hbWljcyAzNjUgQWRtaW5pc3RyYXRvci4gRmluYWxseSwgeW91IGNhbiBjb250YWN0IE1pY3Jvc29mdCBTdXBwb3J0Lic7DQp2YXIgTE9DSURfTk9OX1NSU19GSUxURVJTQ0hFRFVMRSA9ICdPbmx5IFNRTCBTZXJ2ZXIgUmVwb3J0aW5nIFNlcnZpY2VzIHJlcG9ydHMgY2FuIGJlIGZpbHRlcmVkIG9â€¦